import{r as M,j as u,_ as he,R as q}from"./index-D0ehxFdI.js";import{M as is,N as ws}from"./NavBar-D-Wvonyz.js";import{u as ls,a as be,b as pe}from"./Context-BRy6e3VM.js";function js(e=[]){const[i,r]=M.useState(e);return{list:i,toggleList:a=>{if(i.includes(a)){const n=i.filter(d=>d!==a);r(n)}else r([...i,a])},setList:r}}const as=({onHandleQuery:e,placeHolderValue:i="Buscar"})=>u.jsxs("form",{className:"w-full mx-auto m-4 px-4",children:[u.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:u.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),u.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:i,required:!0,onChange:r=>{e(r.target.value)}})]})]}),As=({opening:e,changeState:i,rowSelected:r})=>{const{fulFillmentUsers:t}=ls(),[a,n]=M.useState([]),[d,b]=M.useState(!1),[v,N]=M.useState(a),[T,w]=M.useState(1),{list:m,toggleList:B,setList:D}=js();function ee(){b(!0),be.post(`${pe}/pick-pack/order_assigment/${r.idVtex_order}/${T}`,{data:m}).then(()=>{he.success("Cambios enviados!"),i(!1)}).catch(k=>{console.log(k),he.error("ups ocurrio un error intenta de nuevo")}).finally(()=>b(!1))}function V(k){const g=a.filter(H=>H.name_user.toLowerCase().includes(k.toLowerCase()));g.length>0?N(g):N(a)}return M.useEffect(()=>{n(t),N(t)},[r]),M.useEffect(()=>{T===1?r.picking_assigment!==null?D(r.picking_assigment):D([]):r.packing_assigment!==null?D(r.packing_assigment):D([])},[T,r]),u.jsxs(is,{isOpen:e,setIsOpen:i,children:[u.jsxs("div",{id:"options",className:"flex justify-center gap-8 p-2",children:[u.jsx("div",{onClick:()=>w(1),className:`transition-all cursor-pointer px-5 py-3 w-1/2 text-center rounded-lg  ${T!==1?"border-2 border-blue-500 text-blue-600":"bg-blue-500 text-white"} `,children:"Pickeo"}),u.jsx("div",{onClick:()=>w(2),className:`transition-all cursor-pointer px-5 w-1/2 py-3 text-center rounded-lg  ${T!==2?"border-2 border-blue-500 text-blue-600":"bg-blue-500 text-white"} `,children:"Packing"})]}),u.jsxs("div",{className:"text-sm text-center font-semibold ",children:["Los usuarios seleccionados"," ",T===1?u.jsx("span",{className:"text-info px-3",children:"ALISTARÃN âœ…"}):u.jsx("span",{className:"text-emerald-400 px-3",children:"EPACANRÃNðŸ“¦"})," ","la orden ",r.idVtex_order]}),u.jsx(as,{placeHolderValue:"Buscar Picker",onHandleQuery:V}),u.jsxs("div",{className:"overflow-x-auto max-h-96 mb-16",children:[u.jsxs("table",{className:"table ",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{children:"Nombre"}),u.jsx("th",{children:"XP"}),u.jsx("th",{children:"Averge Time"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:v.map((k,g)=>u.jsxs("tr",{className:"cursor-pointer",onClick:()=>B(k.id_user),children:[u.jsx("td",{children:u.jsx("div",{className:"flex items-center gap-3",children:u.jsx("div",{className:"avatar",children:u.jsx("div",{className:"mask mask-squircle w-12 h-12",children:u.jsx("img",{src:`https://i.pravatar.cc/300?u=${k.id_user+1*4}`,alt:"Avatar Tailwind CSS Component"})})})})}),u.jsx("td",{children:u.jsxs("div",{children:[u.jsx("div",{className:"font-bold",children:k.name_user}),u.jsx("div",{className:"text-sm opacity-50",children:"027"})]})}),u.jsx("td",{children:u.jsx("div",{children:g+12})}),u.jsx("td",{className:"text-center",children:u.jsxs("div",{children:[22+g,"m"]})}),u.jsx("th",{children:u.jsx("label",{children:u.jsx("input",{type:"checkbox",className:"checkbox checkbox-info",readOnly:!0,checked:m&&m.includes(k.id_user)})})})]},g))})]}),u.jsx("div",{className:"fixed bottom-2 -translate-x-1/2 left-1/2",children:d?u.jsx("span",{className:"loading loading-infinity loading-lg text-green-500"}):u.jsx("div",{onClick:ee,className:"euro-btn ",children:"Confirmar cambios"})})]})]})};var xe=e=>e.type==="checkbox",oe=e=>e instanceof Date,U=e=>e==null;const ns=e=>typeof e=="object";var E=e=>!U(e)&&!Array.isArray(e)&&ns(e)&&!oe(e),Vs=e=>E(e)&&e.target?xe(e.target)?e.target.checked:e.target.value:e,ks=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ns=(e,i)=>e.has(ks(i)),Fs=e=>{const i=e.constructor&&e.constructor.prototype;return E(i)&&i.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function I(e){let i;const r=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Te&&(e instanceof Blob||e instanceof FileList))&&(r||E(e)))if(i=r?[]:{},!r&&!Fs(e))i=e;else for(const t in e)e.hasOwnProperty(t)&&(i[t]=I(e[t]));else return e;return i}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],S=e=>e===void 0,x=(e,i,r)=>{if(!i||!E(e))return r;const t=ye(i.split(/[,[\].]+?/)).reduce((a,n)=>U(a)?a:a[n],e);return S(t)||t===e?S(e[i])?r:e[i]:t},Y=e=>typeof e=="boolean";const Xe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};q.createContext(null);var Ss=(e,i,r,t=!0)=>{const a={defaultValues:i._defaultValues};for(const n in e)Object.defineProperty(a,n,{get:()=>{const d=n;return i._proxyFormState[d]!==W.all&&(i._proxyFormState[d]=!t||W.all),r&&(r[d]=!0),e[d]}});return a},$=e=>E(e)&&!Object.keys(e).length,Ds=(e,i,r,t)=>{r(e);const{name:a,...n}=e;return $(n)||Object.keys(n).length>=Object.keys(i).length||Object.keys(n).find(d=>i[d]===(!t||W.all))},Ee=e=>Array.isArray(e)?e:[e];function Es(e){const i=q.useRef(e);i.current=e,q.useEffect(()=>{const r=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var X=e=>typeof e=="string",Cs=(e,i,r,t,a)=>X(e)?(t&&i.watch.add(e),x(r,e,a)):Array.isArray(e)?e.map(n=>(t&&i.watch.add(n),x(r,n))):(t&&(i.watchAll=!0),r),Ue=e=>/^\w*$/.test(e),os=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,i,r)=>{let t=-1;const a=Ue(i)?[i]:os(i),n=a.length,d=n-1;for(;++t<n;){const b=a[t];let v=r;if(t!==d){const N=e[b];v=E(N)||Array.isArray(N)?N:isNaN(+a[t+1])?{}:[]}e[b]=v,e=e[b]}return e},Ls=(e,i,r,t,a)=>i?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[t]:a||!0}}:{},Ze=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched}),Ge=(e,i,r)=>!r&&(i.watchAll||i.watch.has(e)||[...i.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const fe=(e,i,r,t)=>{for(const a of r||Object.keys(e)){const n=x(e,a);if(n){const{_f:d,...b}=n;if(d){if(d.refs&&d.refs[0]&&i(d.refs[0],a)&&!t)break;if(d.ref&&i(d.ref,d.name)&&!t)break;fe(b,i)}else E(b)&&fe(b,i)}}};var Os=(e,i,r)=>{const t=ye(x(e,r));return A(t,"root",i[r]),A(e,r,t),e},Me=e=>e.type==="file",se=e=>typeof e=="function",_e=e=>{if(!Te)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},ve=e=>X(e),Re=e=>e.type==="radio",we=e=>e instanceof RegExp;const Je={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var us=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!S(e[0].attributes.value)?S(e[0].value)||e[0].value===""?Ye:{value:e[0].value,isValid:!0}:Ye:Je}return Je};const es={isValid:!1,value:null};var cs=e=>Array.isArray(e)?e.reduce((i,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:i,es):es;function ss(e,i,r="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||Y(e)&&!e)return{type:r,message:ve(e)?e:"",ref:i}}var ne=e=>E(e)&&!we(e)?e:{value:e,message:""},ts=async(e,i,r,t,a)=>{const{ref:n,refs:d,required:b,maxLength:v,minLength:N,min:T,max:w,pattern:m,validate:B,name:D,valueAsNumber:ee,mount:V,disabled:k}=e._f,g=x(i,D);if(!V||k)return{};const H=d?d[0]:n,Z=_=>{t&&H.reportValidity&&(H.setCustomValidity(Y(_)?"":_||""),H.reportValidity())},C={},ue=Re(n),le=xe(n),Ve=ue||le,z=(ee||Me(n))&&S(n.value)&&S(g)||_e(n)&&n.value===""||g===""||Array.isArray(g)&&!g.length,te=Ls.bind(null,D,r,C),G=(_,p,F,R=J.maxLength,P=J.minLength)=>{const K=_?p:F;C[D]={type:_?R:P,message:K,ref:n,...te(_?R:P,K)}};if(a?!Array.isArray(g)||!g.length:b&&(!Ve&&(z||U(g))||Y(g)&&!g||le&&!us(d).isValid||ue&&!cs(d).isValid)){const{value:_,message:p}=ve(b)?{value:!!b,message:b}:ne(b);if(_&&(C[D]={type:J.required,message:p,ref:H,...te(J.required,p)},!r))return Z(p),C}if(!z&&(!U(T)||!U(w))){let _,p;const F=ne(w),R=ne(T);if(!U(g)&&!isNaN(g)){const P=n.valueAsNumber||g&&+g;U(F.value)||(_=P>F.value),U(R.value)||(p=P<R.value)}else{const P=n.valueAsDate||new Date(g),K=ge=>new Date(new Date().toDateString()+" "+ge),re=n.type=="time",ce=n.type=="week";X(F.value)&&g&&(_=re?K(g)>K(F.value):ce?g>F.value:P>new Date(F.value)),X(R.value)&&g&&(p=re?K(g)<K(R.value):ce?g<R.value:P<new Date(R.value))}if((_||p)&&(G(!!_,F.message,R.message,J.max,J.min),!r))return Z(C[D].message),C}if((v||N)&&!z&&(X(g)||a&&Array.isArray(g))){const _=ne(v),p=ne(N),F=!U(_.value)&&g.length>+_.value,R=!U(p.value)&&g.length<+p.value;if((F||R)&&(G(F,_.message,p.message),!r))return Z(C[D].message),C}if(m&&!z&&X(g)){const{value:_,message:p}=ne(m);if(we(_)&&!g.match(_)&&(C[D]={type:J.pattern,message:p,ref:n,...te(J.pattern,p)},!r))return Z(p),C}if(B){if(se(B)){const _=await B(g,i),p=ss(_,H);if(p&&(C[D]={...p,...te(J.validate,p.message)},!r))return Z(p.message),C}else if(E(B)){let _={};for(const p in B){if(!$(_)&&!r)break;const F=ss(await B[p](g,i),H,p);F&&(_={...F,...te(p,F.message)},Z(F.message),r&&(C[D]=_))}if(!$(_)&&(C[D]={ref:H,..._},!r))return C}}return Z(!0),C};function Ts(e,i){const r=i.slice(0,-1).length;let t=0;for(;t<r;)e=S(e)?t++:e[i[t++]];return e}function Us(e){for(const i in e)if(e.hasOwnProperty(i)&&!S(e[i]))return!1;return!0}function O(e,i){const r=Array.isArray(i)?i:Ue(i)?[i]:os(i),t=r.length===1?e:Ts(e,r),a=r.length-1,n=r[a];return t&&delete t[n],a!==0&&(E(t)&&$(t)||Array.isArray(t)&&Us(t))&&O(e,r.slice(0,-1)),e}var Ce=()=>{let e=[];return{get observers(){return e},next:a=>{for(const n of e)n.next&&n.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(n=>n!==a)}}),unsubscribe:()=>{e=[]}}},je=e=>U(e)||!ns(e);function ie(e,i){if(je(e)||je(i))return e===i;if(oe(e)&&oe(i))return e.getTime()===i.getTime();const r=Object.keys(e),t=Object.keys(i);if(r.length!==t.length)return!1;for(const a of r){const n=e[a];if(!t.includes(a))return!1;if(a!=="ref"){const d=i[a];if(oe(n)&&oe(d)||E(n)&&E(d)||Array.isArray(n)&&Array.isArray(d)?!ie(n,d):n!==d)return!1}}return!0}var ds=e=>e.type==="select-multiple",Ms=e=>Re(e)||xe(e),Le=e=>_e(e)&&e.isConnected,fs=e=>{for(const i in e)if(se(e[i]))return!0;return!1};function Ae(e,i={}){const r=Array.isArray(e);if(E(e)||r)for(const t in e)Array.isArray(e[t])||E(e[t])&&!fs(e[t])?(i[t]=Array.isArray(e[t])?[]:{},Ae(e[t],i[t])):U(e[t])||(i[t]=!0);return i}function hs(e,i,r){const t=Array.isArray(e);if(E(e)||t)for(const a in e)Array.isArray(e[a])||E(e[a])&&!fs(e[a])?S(i)||je(r[a])?r[a]=Array.isArray(e[a])?Ae(e[a],[]):{...Ae(e[a])}:hs(e[a],U(i)?{}:i[a],r[a]):r[a]=!ie(e[a],i[a]);return r}var me=(e,i)=>hs(e,i,Ae(i)),xs=(e,{valueAsNumber:i,valueAsDate:r,setValueAs:t})=>S(e)?e:i?e===""?NaN:e&&+e:r&&X(e)?new Date(e):t?t(e):e;function Oe(e){const i=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):i.disabled))return Me(i)?i.files:Re(i)?cs(e.refs).value:ds(i)?[...i.selectedOptions].map(({value:r})=>r):xe(i)?us(e.refs).value:xs(S(i.value)?e.ref.value:i.value,e)}var Rs=(e,i,r,t)=>{const a={};for(const n of e){const d=x(i,n);d&&A(a,n,d._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:t}},de=e=>S(e)?e:we(e)?e.source:E(e)?we(e.value)?e.value.source:e.value:e,Bs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function rs(e,i,r){const t=x(e,r);if(t||Ue(r))return{error:t,name:r};const a=r.split(".");for(;a.length;){const n=a.join("."),d=x(i,n),b=x(e,n);if(d&&!Array.isArray(d)&&r!==n)return{name:r};if(b&&b.type)return{name:n,error:b};a.pop()}return{name:r}}var Ps=(e,i,r,t,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(i||e):(r?t.isOnBlur:a.isOnBlur)?!e:(r?t.isOnChange:a.isOnChange)?e:!0,Is=(e,i)=>!ye(x(e,i)).length&&O(e,i);const qs={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function $s(e={},i){let r={...qs,...e},t={submitCount:0,isDirty:!1,isLoading:se(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},n=E(r.values)||E(r.defaultValues)?I(r.values||r.defaultValues)||{}:{},d=r.shouldUnregister?{}:I(n),b={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},N,T=0;const w={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:Ce(),array:Ce(),state:Ce()},B=Ze(r.mode),D=Ze(r.reValidateMode),ee=r.criteriaMode===W.all,V=s=>l=>{clearTimeout(T),T=setTimeout(s,l)},k=async s=>{if(w.isValid||s){const l=r.resolver?$((await z()).errors):await G(a,!0);l!==t.isValid&&m.state.next({isValid:l})}},g=s=>w.isValidating&&m.state.next({isValidating:s}),H=(s,l=[],o,h,f=!0,c=!0)=>{if(h&&o){if(b.action=!0,c&&Array.isArray(x(a,s))){const y=o(x(a,s),h.argA,h.argB);f&&A(a,s,y)}if(c&&Array.isArray(x(t.errors,s))){const y=o(x(t.errors,s),h.argA,h.argB);f&&A(t.errors,s,y),Is(t.errors,s)}if(w.touchedFields&&c&&Array.isArray(x(t.touchedFields,s))){const y=o(x(t.touchedFields,s),h.argA,h.argB);f&&A(t.touchedFields,s,y)}w.dirtyFields&&(t.dirtyFields=me(n,d)),m.state.next({name:s,isDirty:p(s,l),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else A(d,s,l)},Z=(s,l)=>{A(t.errors,s,l),m.state.next({errors:t.errors})},C=s=>{t.errors=s,m.state.next({errors:t.errors,isValid:!1})},ue=(s,l,o,h)=>{const f=x(a,s);if(f){const c=x(d,s,S(o)?x(n,s):o);S(c)||h&&h.defaultChecked||l?A(d,s,l?c:Oe(f._f)):P(s,c),b.mount&&k()}},le=(s,l,o,h,f)=>{let c=!1,y=!1;const j={name:s},L=!!(x(a,s)&&x(a,s)._f.disabled);if(!o||h){w.isDirty&&(y=t.isDirty,t.isDirty=j.isDirty=p(),c=y!==j.isDirty);const Q=L||ie(x(n,s),l);y=!!(!L&&x(t.dirtyFields,s)),Q||L?O(t.dirtyFields,s):A(t.dirtyFields,s,!0),j.dirtyFields=t.dirtyFields,c=c||w.dirtyFields&&y!==!Q}if(o){const Q=x(t.touchedFields,s);Q||(A(t.touchedFields,s,o),j.touchedFields=t.touchedFields,c=c||w.touchedFields&&Q!==o)}return c&&f&&m.state.next(j),c?j:{}},Ve=(s,l,o,h)=>{const f=x(t.errors,s),c=w.isValid&&Y(l)&&t.isValid!==l;if(e.delayError&&o?(N=V(()=>Z(s,o)),N(e.delayError)):(clearTimeout(T),N=null,o?A(t.errors,s,o):O(t.errors,s)),(o?!ie(f,o):f)||!$(h)||c){const y={...h,...c&&Y(l)?{isValid:l}:{},errors:t.errors,name:s};t={...t,...y},m.state.next(y)}g(!1)},z=async s=>r.resolver(d,r.context,Rs(s||v.mount,a,r.criteriaMode,r.shouldUseNativeValidation)),te=async s=>{const{errors:l}=await z(s);if(s)for(const o of s){const h=x(l,o);h?A(t.errors,o,h):O(t.errors,o)}else t.errors=l;return l},G=async(s,l,o={valid:!0})=>{for(const h in s){const f=s[h];if(f){const{_f:c,...y}=f;if(c){const j=v.array.has(c.name),L=await ts(f,d,ee,r.shouldUseNativeValidation&&!l,j);if(L[c.name]&&(o.valid=!1,l))break;!l&&(x(L,c.name)?j?Os(t.errors,L,c.name):A(t.errors,c.name,L[c.name]):O(t.errors,c.name))}y&&await G(y,l,o)}}return o.valid},_=()=>{for(const s of v.unMount){const l=x(a,s);l&&(l._f.refs?l._f.refs.every(o=>!Le(o)):!Le(l._f.ref))&&Ne(s)}v.unMount=new Set},p=(s,l)=>(s&&l&&A(d,s,l),!ie(Be(),n)),F=(s,l,o)=>Cs(s,v,{...b.mount?d:S(l)?n:X(s)?{[s]:l}:l},o,l),R=s=>ye(x(b.mount?d:n,s,e.shouldUnregister?x(n,s,[]):[])),P=(s,l,o={})=>{const h=x(a,s);let f=l;if(h){const c=h._f;c&&(!c.disabled&&A(d,s,xs(l,c)),f=_e(c.ref)&&U(l)?"":l,ds(c.ref)?[...c.ref.options].forEach(y=>y.selected=f.includes(y.value)):c.refs?xe(c.ref)?c.refs.length>1?c.refs.forEach(y=>(!y.defaultChecked||!y.disabled)&&(y.checked=Array.isArray(f)?!!f.find(j=>j===y.value):f===y.value)):c.refs[0]&&(c.refs[0].checked=!!f):c.refs.forEach(y=>y.checked=y.value===f):Me(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||m.values.next({name:s,values:{...d}})))}(o.shouldDirty||o.shouldTouch)&&le(s,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ke(s)},K=(s,l,o)=>{for(const h in l){const f=l[h],c=`${s}.${h}`,y=x(a,c);(v.array.has(s)||!je(f)||y&&!y._f)&&!oe(f)?K(c,f,o):P(c,f,o)}},re=(s,l,o={})=>{const h=x(a,s),f=v.array.has(s),c=I(l);A(d,s,c),f?(m.array.next({name:s,values:{...d}}),(w.isDirty||w.dirtyFields)&&o.shouldDirty&&m.state.next({name:s,dirtyFields:me(n,d),isDirty:p(s,c)})):h&&!h._f&&!U(c)?K(s,c,o):P(s,c,o),Ge(s,v)&&m.state.next({...t}),m.values.next({name:s,values:{...d}}),!b.mount&&i()},ce=async s=>{const l=s.target;let o=l.name,h=!0;const f=x(a,o),c=()=>l.type?Oe(f._f):Vs(s),y=j=>{h=Number.isNaN(j)||j===x(d,o,j)};if(f){let j,L;const Q=c(),ae=s.type===Xe.BLUR||s.type===Xe.FOCUS_OUT,bs=!Bs(f._f)&&!r.resolver&&!x(t.errors,o)&&!f._f.deps||Ps(ae,x(t.touchedFields,o),t.isSubmitted,D,B),Se=Ge(o,v,ae);A(d,o,Q),ae?(f._f.onBlur&&f._f.onBlur(s),N&&N(0)):f._f.onChange&&f._f.onChange(s);const De=le(o,Q,ae,!1),ps=!$(De)||Se;if(!ae&&m.values.next({name:o,type:s.type,values:{...d}}),bs)return w.isValid&&k(),ps&&m.state.next({name:o,...Se?{}:De});if(!ae&&Se&&m.state.next({...t}),g(!0),r.resolver){const{errors:Ke}=await z([o]);if(y(Q),h){const _s=rs(t.errors,a,o),Qe=rs(Ke,a,_s.name||o);j=Qe.error,o=Qe.name,L=$(Ke)}}else j=(await ts(f,d,ee,r.shouldUseNativeValidation))[o],y(Q),h&&(j?L=!1:w.isValid&&(L=await G(a,!0)));h&&(f._f.deps&&ke(f._f.deps),Ve(o,L,j,De))}},ge=(s,l)=>{if(x(t.errors,l)&&s.focus)return s.focus(),1},ke=async(s,l={})=>{let o,h;const f=Ee(s);if(g(!0),r.resolver){const c=await te(S(s)?s:f);o=$(c),h=s?!f.some(y=>x(c,y)):o}else s?(h=(await Promise.all(f.map(async c=>{const y=x(a,c);return await G(y&&y._f?{[c]:y}:y)}))).every(Boolean),!(!h&&!t.isValid)&&k()):h=o=await G(a);return m.state.next({...!X(s)||w.isValid&&o!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:o}:{},errors:t.errors,isValidating:!1}),l.shouldFocus&&!h&&fe(a,ge,s?f:v.mount),h},Be=s=>{const l={...n,...b.mount?d:{}};return S(s)?l:X(s)?x(l,s):s.map(o=>x(l,o))},Pe=(s,l)=>({invalid:!!x((l||t).errors,s),isDirty:!!x((l||t).dirtyFields,s),isTouched:!!x((l||t).touchedFields,s),error:x((l||t).errors,s)}),ys=s=>{s&&Ee(s).forEach(l=>O(t.errors,l)),m.state.next({errors:s?t.errors:{}})},Ie=(s,l,o)=>{const h=(x(a,s,{_f:{}})._f||{}).ref;A(t.errors,s,{...l,ref:h}),m.state.next({name:s,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},gs=(s,l)=>se(s)?m.values.subscribe({next:o=>s(F(void 0,l),o)}):F(s,l,!0),Ne=(s,l={})=>{for(const o of s?Ee(s):v.mount)v.mount.delete(o),v.array.delete(o),l.keepValue||(O(a,o),O(d,o)),!l.keepError&&O(t.errors,o),!l.keepDirty&&O(t.dirtyFields,o),!l.keepTouched&&O(t.touchedFields,o),!r.shouldUnregister&&!l.keepDefaultValue&&O(n,o);m.values.next({values:{...d}}),m.state.next({...t,...l.keepDirty?{isDirty:p()}:{}}),!l.keepIsValid&&k()},qe=({disabled:s,name:l,field:o,fields:h,value:f})=>{if(Y(s)){const c=s?void 0:S(f)?Oe(o?o._f:x(h,l)._f):f;A(d,l,c),le(l,c,!1,!1,!0)}},Fe=(s,l={})=>{let o=x(a,s);const h=Y(l.disabled);return A(a,s,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:s}},name:s,mount:!0,...l}}),v.mount.add(s),o?qe({field:o,disabled:l.disabled,name:s,value:l.value}):ue(s,!0,l.value),{...h?{disabled:l.disabled}:{},...r.progressive?{required:!!l.required,min:de(l.min),max:de(l.max),minLength:de(l.minLength),maxLength:de(l.maxLength),pattern:de(l.pattern)}:{},name:s,onChange:ce,onBlur:ce,ref:f=>{if(f){Fe(s,l),o=x(a,s);const c=S(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,y=Ms(c),j=o._f.refs||[];if(y?j.find(L=>L===c):c===o._f.ref)return;A(a,s,{_f:{...o._f,...y?{refs:[...j.filter(Le),c,...Array.isArray(x(n,s))?[{}]:[]],ref:{type:c.type,name:s}}:{ref:c}}}),ue(s,!1,void 0,c)}else o=x(a,s,{}),o._f&&(o._f.mount=!1),(r.shouldUnregister||l.shouldUnregister)&&!(Ns(v.array,s)&&b.action)&&v.unMount.add(s)}}},$e=()=>r.shouldFocusError&&fe(a,ge,v.mount),ms=s=>{Y(s)&&(m.state.next({disabled:s}),fe(a,(l,o)=>{let h=s;const f=x(a,o);f&&Y(f._f.disabled)&&(h||(h=f._f.disabled)),l.disabled=h},0,!1))},He=(s,l)=>async o=>{let h;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let f=I(d);if(m.state.next({isSubmitting:!0}),r.resolver){const{errors:c,values:y}=await z();t.errors=c,f=y}else await G(a);if(O(t.errors,"root"),$(t.errors)){m.state.next({errors:{}});try{await s(f,o)}catch(c){h=c}}else l&&await l({...t.errors},o),$e(),setTimeout($e);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},vs=(s,l={})=>{x(a,s)&&(S(l.defaultValue)?re(s,I(x(n,s))):(re(s,l.defaultValue),A(n,s,I(l.defaultValue))),l.keepTouched||O(t.touchedFields,s),l.keepDirty||(O(t.dirtyFields,s),t.isDirty=l.defaultValue?p(s,I(x(n,s))):p()),l.keepError||(O(t.errors,s),w.isValid&&k()),m.state.next({...t}))},We=(s,l={})=>{const o=s?I(s):n,h=I(o),f=s&&!$(s)?h:n;if(l.keepDefaultValues||(n=o),!l.keepValues){if(l.keepDirtyValues)for(const c of v.mount)x(t.dirtyFields,c)?A(f,c,x(d,c)):re(c,x(f,c));else{if(Te&&S(s))for(const c of v.mount){const y=x(a,c);if(y&&y._f){const j=Array.isArray(y._f.refs)?y._f.refs[0]:y._f.ref;if(_e(j)){const L=j.closest("form");if(L){L.reset();break}}}}a={}}d=e.shouldUnregister?l.keepDefaultValues?I(n):{}:I(f),m.array.next({values:{...f}}),m.values.next({values:{...f}})}v={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!b.mount&&i(),b.mount=!w.isValid||!!l.keepIsValid||!!l.keepDirtyValues,b.watch=!!e.shouldUnregister,m.state.next({submitCount:l.keepSubmitCount?t.submitCount:0,isDirty:l.keepDirty?t.isDirty:!!(l.keepDefaultValues&&!ie(s,n)),isSubmitted:l.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:l.keepDirtyValues?l.keepDefaultValues&&d?me(n,d):t.dirtyFields:l.keepDefaultValues&&s?me(n,s):{},touchedFields:l.keepTouched?t.touchedFields:{},errors:l.keepErrors?t.errors:{},isSubmitSuccessful:l.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},ze=(s,l)=>We(se(s)?s(d):s,l);return{control:{register:Fe,unregister:Ne,getFieldState:Pe,handleSubmit:He,setError:Ie,_executeSchema:z,_getWatch:F,_getDirty:p,_updateValid:k,_removeUnmounted:_,_updateFieldArray:H,_updateDisabledField:qe,_getFieldArray:R,_reset:We,_resetDefaultValues:()=>se(r.defaultValues)&&r.defaultValues().then(s=>{ze(s,r.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:ms,_subjects:m,_proxyFormState:w,_setErrors:C,get _fields(){return a},get _formValues(){return d},get _state(){return b},set _state(s){b=s},get _defaultValues(){return n},get _names(){return v},set _names(s){v=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:ke,register:Fe,handleSubmit:He,watch:gs,setValue:re,getValues:Be,reset:ze,resetField:vs,clearErrors:ys,unregister:Ne,setError:Ie,setFocus:(s,l={})=>{const o=x(a,s),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),l.shouldSelect&&f.select())}},getFieldState:Pe}}function Hs(e={}){const i=q.useRef(),r=q.useRef(),[t,a]=q.useState({isDirty:!1,isValidating:!1,isLoading:se(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:se(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...$s(e,()=>a(d=>({...d}))),formState:t});const n=i.current.control;return n._options=e,Es({subject:n._subjects.state,next:d=>{Ds(d,n._proxyFormState,n._updateFormState,!0)&&a({...n._formState})}}),q.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),q.useEffect(()=>{if(n._proxyFormState.isDirty){const d=n._getDirty();d!==t.isDirty&&n._subjects.state.next({isDirty:d})}},[n,t.isDirty]),q.useEffect(()=>{e.values&&!ie(e.values,r.current)?(n._reset(e.values,n._options.resetOptions),r.current=e.values,a(d=>({...d}))):n._resetDefaultValues()},[e.values,n]),q.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),q.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),q.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),i.current.formState=Ss(t,n),i.current}const Ws=()=>{const[e,i]=M.useState(!1),[r,t]=M.useState(!1),{register:a,handleSubmit:n,errors:d}=Hs(),b=v=>{console.log(v),t(!0),be.post(`${pe}/pick-pack/create/user`,{name:v.name,last_name:v.last_name,email:v.email,password:v.password}).then(N=>{console.log(N),he.success("Usuario creado exitosamente"),i(!1)}).catch(N=>{console.log(N),he.error("Ups algo salio mal, intenta de nuevo")}).finally(()=>t(!1))};return u.jsxs("div",{className:"",children:[u.jsx("div",{className:"fixed bottom-2 left-2 z-30",children:u.jsx("div",{onClick:()=>i(!e),className:"bg-blue-500 py-2 px-3 rounded-lg cursor-pointer",children:u.jsx("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 640 512",fill:"currentColor",height:"1em",width:"1em",children:u.jsx("path",{d:"M352 128c0 70.7-57.3 128-128 128S96 198.7 96 128 153.3 0 224 0s128 57.3 128 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4c98.5 0 178.3 79.8 178.3 178.3 0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"})})})}),u.jsx(is,{isOpen:e,setIsOpen:i,children:u.jsxs("div",{className:"p-7",children:[u.jsx("div",{className:"text-center font-semibold text-xl",children:"Agregar Picker"}),u.jsxs("form",{onSubmit:n(b),className:"",children:[u.jsxs("label",{className:"form-control w-full max-w-xs",children:[u.jsx("div",{className:"label",children:u.jsx("span",{className:"label-text font-semibold",children:"Nombre(s):"})}),u.jsx("input",{...a("name",{required:!0}),type:"text",placeholder:`Elsa Porrico

              `,className:"input input-bordered w-full max-w-xs"})]})," ",u.jsxs("label",{className:"form-control w-full max-w-xs",children:[u.jsx("div",{className:"label",children:u.jsx("span",{className:"label-text font-semibold",children:"Apellidos:"})}),u.jsx("input",{...a("last_name",{required:!0}),type:"text",placeholder:`Elsa Porrico

              `,className:"input input-bordered w-full max-w-xs"})]}),u.jsxs("label",{className:"form-control w-full max-w-xs",children:[u.jsx("div",{className:"label",children:u.jsx("span",{className:"label-text font-semibold",children:"Correo electronico:"})}),u.jsx("input",{...a("email",{required:!0}),type:"text",placeholder:"@example.com",className:"input input-bordered w-full max-w-xs"})]}),u.jsxs("label",{className:"form-control w-full max-w-xs",children:[u.jsx("div",{className:"label",children:u.jsx("span",{className:"label-text font-semibold",children:"ContraseÃ±a:"})}),u.jsx("input",{...a("password",{required:!0}),type:"text",placeholder:"********",className:"input input-bordered w-full max-w-xs"})]}),u.jsx("div",{className:"text-center mt-4",children:r?u.jsx("span",{className:"loading loading-spinner text-info"}):u.jsx("button",{type:"submit",className:"euro-btn w-3/4",children:"Enviar"})})]})]})})]})},zs=()=>{const[e,i]=M.useState(!1),[r,t]=M.useState({}),[a,n]=M.useState([]),{fulFillmentUsers:d,setFulFillmentUsers:b}=ls(),[v,N]=M.useState([]),[T,w]=M.useState([]);function m(V){i(!0),t(V)}function B(){n(!0),be.get(`${pe}/pick-pack/orders_status`,{params:{status:[3,4,5,6,7]}}).then(V=>{console.log(V.data),N(V.data.ordersList),w(V.data.ordersList)}).catch(V=>{console.log(V),he.error("Ocurrio un error al intentar obtener las ordenes ")}).finally(()=>n(!1))}function D(V){const k=v.find(g=>g.idVtex_order===V);console.log(k),w(k?[k]:v)}function ee(){be.get(`${pe}/pick-pack/fulfillment/users`).then(V=>{b(V.data)}).catch(V=>{console.log(V)})}return M.useEffect(()=>{B(),ee()},[]),u.jsxs("div",{className:"",children:[u.jsx(Ws,{}),u.jsx("div",{className:"sticky top-20 bg-white z-20",children:u.jsx(as,{onHandleQuery:D,placeHolderValue:"Busca una orden"})}),u.jsx("div",{className:"overflow-x-auto ",children:u.jsxs("table",{className:"table  text-center table-pin-rows table-sm table-zebra",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"",children:[u.jsx("th",{className:"",children:"Orden"}),u.jsx("th",{children:"Estatus"}),u.jsx("th",{children:"Asignar"})]})}),u.jsx("tbody",{children:T.map((V,k)=>u.jsxs("tr",{children:[u.jsx("th",{children:V.idVtex_order}),u.jsx("td",{children:V.status_order}),u.jsx("td",{children:u.jsx("div",{className:"btn btn-sm",onClick:()=>{m(V)},children:u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",height:"1em",width:"1em",className:"w-7 h-7",children:u.jsx("path",{d:"M21.7 13.35l-1 1-2.05-2.05 1-1a.55.55 0 01.77 0l1.28 1.28c.21.21.21.56 0 .77M12 18.94l6.06-6.06 2.05 2.05L14.06 21H12v-2.06M12 14c-4.42 0-8 1.79-8 4v2h6v-1.89l4-4c-.66-.08-1.33-.11-2-.11m0-10a4 4 0 00-4 4 4 4 0 004 4 4 4 0 004-4 4 4 0 00-4-4z"})})})})]},k))})]})}),a&&u.jsx("div",{className:"text-center mt-10",children:u.jsx("span",{className:"loading loading-dots loading-lg"})}),u.jsx(As,{opening:e,rowSelected:r,changeState:i})]})},Ys=()=>u.jsx(ws,{children:u.jsx(zs,{})});export{Ys as default};
