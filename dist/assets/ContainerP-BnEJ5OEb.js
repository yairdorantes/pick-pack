import{a as y,r as n,j as e,b as _,_ as j}from"./index-ESkqNhxh.js";import{N as M}from"./NavBar-DWbUtt4d.js";import{u as V,a as S,b as L}from"./Context-DjW2-7Ea.js";import{u as C}from"./getProducts-DsUbh5Kf.js";const O=({view:l})=>{const r=y(),[u,d]=n.useState(l),a=c=>{let o="";if(c===1?(o="/comingsoon",d(1)):c===2?(o="/picking",d(2)):c===3&&(o="/packing",d(3)),!document.startViewTransition){r(o);return}document.startViewTransition(()=>_.flushSync(()=>r(o)))};return e.jsx("div",{className:"border-t-2 border-b-2",children:e.jsxs("div",{className:"grid grid-cols-2  text-center  cursor-pointer",children:[e.jsxs("div",{className:`p-3 flex justify-center gap-2 items-center ${u===2&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>a(2),children:[e.jsx("div",{children:"Picking"}),e.jsx("div",{children:e.jsxs("svg",{fill:"currentColor",viewBox:"0 0 16 16",height:"1em",width:"1em",className:"w-5 h-5",children:[e.jsx("path",{fillRule:"evenodd",d:"M10.854 7.146a.5.5 0 010 .708l-3 3a.5.5 0 01-.708 0l-1.5-1.5a.5.5 0 11.708-.708L7.5 9.793l2.646-2.647a.5.5 0 01.708 0z"}),e.jsx("path",{d:"M4 1.5H3a2 2 0 00-2 2V14a2 2 0 002 2h10a2 2 0 002-2V3.5a2 2 0 00-2-2h-1v1h1a1 1 0 011 1V14a1 1 0 01-1 1H3a1 1 0 01-1-1V3.5a1 1 0 011-1h1v-1z"}),e.jsx("path",{d:"M9.5 1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5h3zm-3-1A1.5 1.5 0 005 1.5v1A1.5 1.5 0 006.5 4h3A1.5 1.5 0 0011 2.5v-1A1.5 1.5 0 009.5 0h-3z"})]})})]}),e.jsxs("div",{className:`p-3 flex justify-center items-center gap-2 ${u===3&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>a(3),children:[e.jsx("div",{children:"Packing "}),e.jsx("div",{children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 16 16",fill:"currentColor",height:"1em",width:"1em",children:e.jsx("path",{fillRule:"evenodd",d:"M6.122.392a1.75 1.75 0 011.756 0l5.25 3.045c.54.313.872.89.872 1.514V7.25a.75.75 0 01-1.5 0V5.677L7.75 8.432v6.384a1 1 0 01-1.502.865L.872 12.563A1.75 1.75 0 010 11.049V4.951c0-.624.332-1.2.872-1.514L6.122.392zM7.125 1.69l4.63 2.685L7 7.133 2.245 4.375l4.63-2.685a.25.25 0 01.25 0zM1.5 11.049V5.677l4.75 2.755v5.516l-4.625-2.683a.25.25 0 01-.125-.216zm10.828 3.684a.75.75 0 101.087 1.034l2.378-2.5a.75.75 0 000-1.034l-2.378-2.5a.75.75 0 00-1.087 1.034L13.501 12H10.25a.75.75 0 000 1.5h3.251l-1.173 1.233z"})})})]})]})})},T=()=>{const l=y(),[r,u]=n.useState([]),[d,a]=n.useState([]),[c,o]=n.useState(!1),{user:x}=V(),[h,k]=n.useState([]),[m]=n.useState(()=>{const s=localStorage.getItem("ws-picking");return s||""}),{getProducts:g}=C();n.useEffect(()=>{o(!0),S.get(`${L}/pick-pack/orders_status`,{params:{status:[3,4]}}).then(s=>{console.log(s.data),u(s.data.ordersList),a(s.data.ordersList),k(s.data.usersList)}).catch(s=>{console.log(s),j.error("Error")}).finally(()=>o(!1));//! this is for test
},[]);const b=s=>{if(s.picking_assigment&&s.picking_assigment.includes(x.id)){if(localStorage.setItem("ws-picking",s.idVtex_order),g(s.idVtex_order),!document.startViewTransition){l(`/picking/${s.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/picking/${s.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},p=s=>{const t=r.filter(i=>i.idVtex_order===s.replace(/\s+$/,""));console.log(s),console.log(t),t.length>0?a(t):a(r)},N=s=>{if(s){const t=r.filter(i=>i.picking_assigment&&i.picking_assigment.includes(x.id));a(t)}else a(r)},v=s=>s.map(i=>{const f=h.find(w=>w.id_user===i);return f?f.name_user:"desconocido"}).join(", ");return e.jsxs("div",{className:"",children:[e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:s=>{p(s.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control mb-3 inline-block ml-4 border-2 rounded-lg shadow-sm",children:e.jsxs("label",{className:"cursor-pointer label",children:[e.jsx("span",{className:"label-text mr-2  font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:s=>N(s.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),m.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Última orden seleccionada:"," ",e.jsx("span",{onClick:()=>{b({idVtex_order:m,picking_assigment:[x.id]})},className:"link link-info",children:m})]}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",r.length," ordenes"," "]}),e.jsxs("div",{className:"overflow-x-auto w-full   mx-auto",children:[e.jsxs("table",{className:"table table-zebra border-2 text-center","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{className:"",children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!c&&d.map((s,t)=>e.jsxs("tr",{onClick:()=>b(s),className:`${m===s.idVtex_order&&"!bg-blue-200"} cursor-pointer`,children:[e.jsx("td",{className:"",children:s.idVtex_order}),e.jsx("td",{className:"",children:s.picking_assigment===null||s.picking_assigment.length===0?"...":v(s.picking_assigment)})]},t))})]}),c&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},P=()=>{const l=y(),[r,u]=n.useState([]),[d,a]=n.useState([]),[c,o]=n.useState(!1),{getProducts:x}=C(),{user:h}=V(),[k,m]=n.useState([]),[g]=n.useState(()=>{const s=localStorage.getItem("ws-packing");return s||""}),b=s=>s.map(i=>{const f=k.find(w=>w.id_user===i);return f?f.name_user:"desconocido"}).join(", ");n.useEffect(()=>{o(!0),S.get(`${L}/pick-pack/orders_status`,{params:{status:[5,6]}}).then(s=>{u(s.data.ordersList),a(s.data.ordersList),m(s.data.usersList),console.log(s.data.ordersList)}).catch(s=>{console.log(s),j.error("Error")}).finally(()=>o(!1));//! this is for test
},[]);const p=s=>{if(s.packing_assigment&&s.packing_assigment.includes(h.id)){if(localStorage.setItem("ws-packing",s.idVtex_order),x(s.idVtex_order),!document.startViewTransition){l(`/pack/${s.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/pack/${s.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},N=s=>{const t=r.filter(i=>i.idVtex_order===s.replace(/\s+$/,""));console.log(s),console.log(t),t.length>0?a(t):a(r)},v=s=>{if(s){const t=r.filter(i=>i.packing_assigment&&i.packing_assigment.includes(h.id));a(t)}else a(r)};return e.jsxs("div",{className:"",children:[e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:s=>{N(s.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control mb-3 inline-block ml-4 border-2 rounded-lg shadow-sm ",children:e.jsxs("label",{className:"cursor-pointer label ",children:[e.jsx("span",{className:"label-text mr-2  font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:s=>v(s.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),g.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Última orden seleccionada:"," ",e.jsx("span",{onClick:()=>{p({idVtex_order:g,packing_assigment:[h.id]})},className:"link link-info",children:g}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",r.length," ordenes"," "]})]}),e.jsxs("div",{className:"overflow-x-auto w-full  mx-auto",children:[e.jsxs("table",{className:"table text-center table-zebra  border-2 ","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!c&&d.map((s,t)=>e.jsxs("tr",{onClick:()=>p(s),className:"hover cursor-pointer",children:[e.jsx("td",{className:"",children:s.idVtex_order}),e.jsx("td",{children:s.packing_assigment===null||s.packing_assigment.length===0?"...":b(s.packing_assigment)})]},t))})]}),c&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},D=({view:l})=>e.jsx("div",{children:e.jsxs(M,{children:[e.jsx(O,{view:l}),l===2&&e.jsx(T,{}),l===3&&e.jsx(P,{})]})});export{D as default};
