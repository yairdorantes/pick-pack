import{a as y,r as n,j as e,b as _,_ as j}from"./index-BOHLvyG0.js";import{N as O}from"./NavBar-BtEBWpkt.js";import{u as V,a as S,b as L}from"./Context-CJsW2mcV.js";import{u as C}from"./getProducts-Cm-xlwxc.js";const T=({view:l})=>{const a=y(),[m,u]=n.useState(l),i=o=>{let c="";if(o===1?(c="/comingsoon",u(1)):o===2?(c="/picking",u(2)):o===3&&(c="/packing",u(3)),!document.startViewTransition){a(c);return}document.startViewTransition(()=>_.flushSync(()=>a(c)))};return e.jsx("div",{className:"border-t-2 border-b-2",children:e.jsxs("div",{className:"grid grid-cols-2  text-center  cursor-pointer",children:[e.jsxs("div",{className:`p-3 flex justify-center gap-2 items-center ${m===2&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>i(2),children:[e.jsx("div",{children:"Picking"}),e.jsx("div",{children:e.jsxs("svg",{fill:"currentColor",viewBox:"0 0 16 16",height:"1em",width:"1em",className:"w-5 h-5",children:[e.jsx("path",{fillRule:"evenodd",d:"M10.854 7.146a.5.5 0 010 .708l-3 3a.5.5 0 01-.708 0l-1.5-1.5a.5.5 0 11.708-.708L7.5 9.793l2.646-2.647a.5.5 0 01.708 0z"}),e.jsx("path",{d:"M4 1.5H3a2 2 0 00-2 2V14a2 2 0 002 2h10a2 2 0 002-2V3.5a2 2 0 00-2-2h-1v1h1a1 1 0 011 1V14a1 1 0 01-1 1H3a1 1 0 01-1-1V3.5a1 1 0 011-1h1v-1z"}),e.jsx("path",{d:"M9.5 1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5h3zm-3-1A1.5 1.5 0 005 1.5v1A1.5 1.5 0 006.5 4h3A1.5 1.5 0 0011 2.5v-1A1.5 1.5 0 009.5 0h-3z"})]})})]}),e.jsxs("div",{className:`p-3 flex justify-center items-center gap-2 ${m===3&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>i(3),children:[e.jsx("div",{children:"Packing "}),e.jsx("div",{children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 16 16",fill:"currentColor",height:"1em",width:"1em",children:e.jsx("path",{fillRule:"evenodd",d:"M6.122.392a1.75 1.75 0 011.756 0l5.25 3.045c.54.313.872.89.872 1.514V7.25a.75.75 0 01-1.5 0V5.677L7.75 8.432v6.384a1 1 0 01-1.502.865L.872 12.563A1.75 1.75 0 010 11.049V4.951c0-.624.332-1.2.872-1.514L6.122.392zM7.125 1.69l4.63 2.685L7 7.133 2.245 4.375l4.63-2.685a.25.25 0 01.25 0zM1.5 11.049V5.677l4.75 2.755v5.516l-4.625-2.683a.25.25 0 01-.125-.216zm10.828 3.684a.75.75 0 101.087 1.034l2.378-2.5a.75.75 0 000-1.034l-2.378-2.5a.75.75 0 00-1.087 1.034L13.501 12H10.25a.75.75 0 000 1.5h3.251l-1.173 1.233z"})})})]})]})})},P=()=>{const l=y();n.useState("");const[a,m]=n.useState([]),[u,i]=n.useState([]),[o,c]=n.useState(!1),{user:h}=V(),[g,k]=n.useState([]),[x,b]=n.useState(()=>{const s=localStorage.getItem("ws-picking");return s||""}),{getProducts:N}=C();n.useEffect(()=>{c(!0),S.get(`${L}/pick-pack/orders_status`,{params:{status:[3,4]}}).then(s=>{console.log(s.data),m(s.data.ordersList),i(s.data.ordersList),k(s.data.usersList)}).catch(s=>{console.log(s),j.error("Error")}).finally(()=>c(!1));//! this is for test
},[]);const f=s=>{if(s.picking_assigment&&s.picking_assigment.includes(h.id)){if(localStorage.setItem("ws-picking",s.idVtex_order),N(s.idVtex_order),!document.startViewTransition){l(`/picking/${s.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/picking/${s.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},v=s=>{const r=a.filter(d=>d.idVtex_order===s.replace(/\s+$/,""));console.log(s),console.log(r),r.length>0?i(r):i(a)},w=s=>{if(s){const r=a.filter(d=>d.picking_assigment&&d.picking_assigment.includes(h.id));i(r)}else i(a)},t=s=>s.map(d=>{const p=g.find(M=>M.id_user===d);return p?p.name_user:"desconocido"}).join(", ");return e.jsxs("div",{className:"",children:[e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:s=>{v(s.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control mb-3 inline-block ml-4 border-2 rounded-lg shadow-sm",children:e.jsxs("label",{className:"cursor-pointer label",children:[e.jsx("span",{className:"label-text mr-2  font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:s=>w(s.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),x.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Última orden seleccionada:"," ",e.jsx("span",{onClick:()=>{f({idVtex_order:x,picking_assigment:[h.id]})},className:"link link-info",children:x})]}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",a.length," ordenes"," "]}),e.jsxs("div",{className:"overflow-x-auto w-full   mx-auto",children:[e.jsxs("table",{className:"table table-zebra border-2 text-center","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{className:"",children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!o&&u.map((s,r)=>e.jsxs("tr",{onClick:()=>f(s),className:`${x===s.idVtex_order&&"!bg-blue-200"} cursor-pointer`,children:[e.jsx("td",{className:"",children:s.idVtex_order}),e.jsx("td",{className:"",children:s.picking_assigment===null||s.picking_assigment.length===0?"...":t(s.picking_assigment)})]},r))})]}),o&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},$=()=>{const l=y(),[a,m]=n.useState([]),[u,i]=n.useState([]),[o,c]=n.useState(!1),{getProducts:h}=C(),{user:g}=V(),[k,x]=n.useState([]),[b]=n.useState(()=>{const t=localStorage.getItem("ws-packing");return t||""}),N=t=>t.map(r=>{const d=k.find(p=>p.id_user===r);return d?d.name_user:"desconocido"}).join(", ");n.useEffect(()=>{c(!0),S.get(`${L}/pick-pack/orders_status`,{params:{status:[5,6]}}).then(t=>{m(t.data.ordersList),i(t.data.ordersList),x(t.data.usersList),console.log(t.data.ordersList)}).catch(t=>{console.log(t),j.error("Error")}).finally(()=>c(!1));//! this is for test
},[]);const f=t=>{if(t.packing_assigment&&t.packing_assigment.includes(g.id)){if(localStorage.setItem("ws-packing",t.idVtex_order),h(t.idVtex_order),!document.startViewTransition){l(`/pack/${t.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/pack/${t.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},v=t=>{const s=a.filter(r=>r.idVtex_order===t.replace(/\s+$/,""));console.log(t),console.log(s),s.length>0?i(s):i(a)},w=t=>{if(t){const s=a.filter(r=>r.packing_assigment&&r.packing_assigment.includes(g.id));i(s)}else i(a)};return e.jsxs("div",{className:"",children:[e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:t=>{v(t.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control mb-3 inline-block ml-4 border-2 rounded-lg shadow-sm ",children:e.jsxs("label",{className:"cursor-pointer label ",children:[e.jsx("span",{className:"label-text mr-2  font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:t=>w(t.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),b.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Última orden seleccionada:"," ",e.jsx("span",{onClick:()=>{f({idVtex_order:b,packing_assigment:[g.id]})},className:"link link-info",children:b}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",a.length," ordenes"," "]})]}),e.jsxs("div",{className:"overflow-x-auto w-full  mx-auto",children:[e.jsxs("table",{className:"table text-center table-zebra  border-2 ","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!o&&u.map((t,s)=>e.jsxs("tr",{onClick:()=>f(t),className:"hover cursor-pointer",children:[e.jsx("td",{className:"",children:t.idVtex_order}),e.jsx("td",{children:t.packing_assigment===null||t.packing_assigment.length===0?"...":N(t.packing_assigment)})]},s))})]}),o&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},E=({view:l})=>e.jsx("div",{children:e.jsxs(O,{children:[e.jsx(T,{view:l}),l===2&&e.jsx(P,{}),l===3&&e.jsx($,{})]})});export{E as default};
