import{a as v,r,j as e,b as _,_ as j}from"./index-CkgEI_JZ.js";import{N as T}from"./NavBar-C3YPsdwC.js";import{u as V,a as C,b as L}from"./Context-B-Ryon07.js";import{u as O}from"./getProducts-D-tsEk7e.js";import"./oms-DCe7yTTY.js";const P=({view:l})=>{const a=v(),[u,d]=r.useState(l),n=c=>{let o="";if(c===1?(o="/comingsoon",d(1)):c===2?(o="/picking",d(2)):c===3&&(o="/packing",d(3)),!document.startViewTransition){a(o);return}document.startViewTransition(()=>_.flushSync(()=>a(o)))};return e.jsx("div",{className:"border-t-2 border-b-2",children:e.jsxs("div",{className:"grid grid-cols-2  text-center  cursor-pointer",children:[e.jsx("div",{className:`p-3 ${u===2&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>n(2),children:"ðŸ‘‰ Picking âœ…"}),e.jsx("div",{className:`p-3 ${u===3&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>n(3),children:"ðŸ“¦ Packing ðŸ“¦"})]})})},$=()=>{const l=v();r.useState("");const[a,u]=r.useState([]),[d,n]=r.useState([]),[c,o]=r.useState(!1),{user:x}=V(),[g,k]=r.useState([]),[m,b]=r.useState(()=>{const s=localStorage.getItem("ws");return s||""}),{getProducts:S}=O();r.useEffect(()=>{o(!0),C.get(`${L}/pick-pack/orders_status`,{params:{status:[3,4]}}).then(s=>{console.log(s.data),u(s.data.ordersList),n(s.data.ordersList),k(s.data.usersList)}).catch(s=>{console.log(s),j.error("Error")}).finally(()=>o(!1));//! this is for test
},[]);const f=s=>{if(s.picking_assigment&&s.picking_assigment.includes(x.id)){if(localStorage.setItem("ws",s.idVtex_order),S(s.idVtex_order),!document.startViewTransition){l(`/picking/${s.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/picking/${s.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},p=s=>{const t=a.filter(i=>i.idVtex_order===s.replace(/\s+$/,""));console.log(s),console.log(t),t.length>0?n(t):n(a)},N=s=>{if(s){const t=a.filter(i=>i.picking_assigment&&i.picking_assigment.includes(x.id));n(t)}else n(a)},w=s=>s.map(i=>{const h=g.find(y=>y.id_user===i);return h?h.name_user:"desconocido"}).join(", ");return e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"font-semibold flex justify-center items-center gap-2  text-center text-black mt-4",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600"}),e.jsx("div",{children:"Alistamiento"}),e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600"})]}),e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:s=>{p(s.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control inline-block ml-4 border-2 rounded-lg shadow-sm",children:e.jsxs("label",{className:"cursor-pointer label",children:[e.jsx("span",{className:"label-text mr-2 mb-2 font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:s=>N(s.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),m.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Ãšltima orden seleccionada:"," ",e.jsx("span",{onClick:()=>{f({idVtex_order:m,picking_assigment:[x.id]})},className:"link link-info",children:m})]}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",a.length," ordenes"," "]}),e.jsxs("div",{className:"overflow-x-auto w-full   mx-auto",children:[e.jsxs("table",{className:"table table-zebra border-2 text-center","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!c&&d.map((s,t)=>e.jsxs("tr",{onClick:()=>f(s),className:`${m===s.idVtex_order&&"!bg-blue-200"} cursor-pointer`,children:[e.jsx("td",{className:"",children:s.idVtex_order}),e.jsx("td",{className:"",children:s.picking_assigment===null||s.picking_assigment.length===0?"...":w(s.picking_assigment)})]},t))})]}),c&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},E=()=>{const l=v();r.useState("");const[a,u]=r.useState([]),[d,n]=r.useState([]),[c,o]=r.useState(!1),{getProducts:x}=O(),{user:g}=V(),[k,m]=r.useState([]),[b,S]=r.useState(()=>{const s=localStorage.getItem("ws");return s||""}),f=s=>s.map(i=>{const h=k.find(y=>y.id_user===i);return h?h.name_user:"desconocido"}).join(", ");r.useEffect(()=>{o(!0),C.get(`${L}/pick-pack/orders_status`,{params:{status:[5,6]}}).then(s=>{u(s.data.ordersList),n(s.data.ordersList),m(s.data.usersList),console.log(s.data.ordersList)}).catch(s=>{console.log(s),j.error("Error")}).finally(()=>o(!1));//! this is for test
},[]);const p=s=>{if(s.packing_assigment&&s.packing_assigment.includes(g.id)){if(localStorage.setItem("ws",s.idVtex_order),x(s.idVtex_order),!document.startViewTransition){l(`/pack/${s.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/pack/${s.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},N=s=>{const t=a.filter(i=>i.idVtex_order===s.replace(/\s+$/,""));console.log(s),console.log(t),t.length>0?n(t):n(a)},w=s=>{if(s){const t=a.filter(i=>i.packing_assigment&&i.packing_assigment.includes(g.id));n(t)}else n(a)};return e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"font-semibold flex justify-center items-center gap-2  text-center text-black mt-4",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-400"}),e.jsx("div",{children:"Empaque"}),e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-400"})]}),e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:s=>{N(s.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control inline-block ml-4 border-2 rounded-lg shadow-sm ",children:e.jsxs("label",{className:"cursor-pointer label",children:[e.jsx("span",{className:"label-text mr-2 mb-2 font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:s=>w(s.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),b.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Ãšltima orden seleccionada:"," ",e.jsx("span",{onClick:()=>{p({idVtex_order:b,packing_assigment:[g.id]})},className:"link link-info",children:b}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",a.length," ordenes"," "]})]}),e.jsxs("div",{className:"overflow-x-auto w-full  mx-auto",children:[e.jsxs("table",{className:"table text-center table-zebra  border-2 ","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!c&&d.map((s,t)=>e.jsxs("tr",{onClick:()=>p(s),className:"hover cursor-pointer",children:[e.jsx("td",{className:"",children:s.idVtex_order}),e.jsx("td",{children:s.packing_assigment===null||s.packing_assigment.length===0?"...":f(s.packing_assigment)})]},t))})]}),c&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},A=({view:l})=>e.jsx("div",{children:e.jsxs(T,{children:[e.jsx(P,{view:l}),l===2&&e.jsx($,{}),l===3&&e.jsx(E,{})]})});export{A as default};
