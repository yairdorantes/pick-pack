import{d as v,r as i,j as e,e as _,a as S,b as V,c as C,_ as j}from"./index-CjXT-2kf.js";import{N as T}from"./NavBar-D09-y_UA.js";import{u as L}from"./getProducts-DEy59rB2.js";const P=({view:l})=>{const a=v(),[m,u]=i.useState(l),n=o=>{let c="";if(o===1?(c="/comingsoon",u(1)):o===2?(c="/picking",u(2)):o===3&&(c="/packing",u(3)),!document.startViewTransition){a(c);return}document.startViewTransition(()=>_.flushSync(()=>a(c)))};return e.jsx("div",{className:"border-t-2 border-b-2",children:e.jsxs("div",{className:"grid grid-cols-2  text-center  cursor-pointer",children:[e.jsx("div",{className:`p-3 ${m===2&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>n(2),children:"ðŸ‘‰ Picking âœ…"}),e.jsx("div",{className:`p-3 ${m===3&&"border-b-4 border-b-blue-600 text-blue-600"}`,onClick:()=>n(3),children:"ðŸ“¦ Packing ðŸ“¦"})]})})},$=()=>{const l=v();i.useState("");const[a,m]=i.useState([]),[u,n]=i.useState([]),[o,c]=i.useState(!1),{user:g}=S(),[h,k]=i.useState([]),[x,f]=i.useState(()=>{const s=localStorage.getItem("ws-picking");return s||""}),{getProducts:N}=L();i.useEffect(()=>{c(!0),V.get(`${C}/pick-pack/orders_status`,{params:{status:[3,4]}}).then(s=>{console.log(s.data),m(s.data.ordersList),n(s.data.ordersList),k(s.data.usersList)}).catch(s=>{console.log(s),j.error("Error")}).finally(()=>c(!1));//! this is for test
},[]);const b=s=>{if(s.picking_assigment&&s.picking_assigment.includes(g.id)){if(localStorage.setItem("ws-picking",s.idVtex_order),N(s.idVtex_order),!document.startViewTransition){l(`/picking/${s.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/picking/${s.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},w=s=>{const r=a.filter(d=>d.idVtex_order===s.replace(/\s+$/,""));console.log(s),console.log(r),r.length>0?n(r):n(a)},y=s=>{if(s){const r=a.filter(d=>d.picking_assigment&&d.picking_assigment.includes(g.id));n(r)}else n(a)},t=s=>s.map(d=>{const p=h.find(O=>O.id_user===d);return p?p.name_user:"desconocido"}).join(", ");return e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"font-semibold flex justify-center items-center gap-2  text-center text-black mt-4",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600"}),e.jsx("div",{children:"Alistamiento"}),e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600"})]}),e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:s=>{w(s.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control mb-3 inline-block ml-4 border-2 rounded-lg shadow-sm",children:e.jsxs("label",{className:"cursor-pointer label",children:[e.jsx("span",{className:"label-text mr-2  font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:s=>y(s.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),x.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Ãšltima orden seleccionada:"," ",e.jsx("span",{onClick:()=>{b({idVtex_order:x,picking_assigment:[g.id]})},className:"link link-info",children:x})]}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",a.length," ordenes"," "]}),e.jsxs("div",{className:"overflow-x-auto w-full   mx-auto",children:[e.jsxs("table",{className:"table table-zebra border-2 text-center","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!o&&u.map((s,r)=>e.jsxs("tr",{onClick:()=>b(s),className:`${x===s.idVtex_order&&"!bg-blue-200"} cursor-pointer`,children:[e.jsx("td",{className:"",children:s.idVtex_order}),e.jsx("td",{className:"",children:s.picking_assigment===null||s.picking_assigment.length===0?"...":t(s.picking_assigment)})]},r))})]}),o&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},E=()=>{const l=v(),[a,m]=i.useState([]),[u,n]=i.useState([]),[o,c]=i.useState(!1),{getProducts:g}=L(),{user:h}=S(),[k,x]=i.useState([]),[f]=i.useState(()=>{const t=localStorage.getItem("ws-packing");return t||""}),N=t=>t.map(r=>{const d=k.find(p=>p.id_user===r);return d?d.name_user:"desconocido"}).join(", ");i.useEffect(()=>{c(!0),V.get(`${C}/pick-pack/orders_status`,{params:{status:[5,6]}}).then(t=>{m(t.data.ordersList),n(t.data.ordersList),x(t.data.usersList),console.log(t.data.ordersList)}).catch(t=>{console.log(t),j.error("Error")}).finally(()=>c(!1));//! this is for test
},[]);const b=t=>{if(t.packing_assigment&&t.packing_assigment.includes(h.id)){if(localStorage.setItem("ws-packing",t.idVtex_order),g(t.idVtex_order),!document.startViewTransition){l(`/pack/${t.idVtex_order}`);return}document.startViewTransition(()=>_.flushSync(()=>l(`/pack/${t.idVtex_order}`)))}else j.error("No tienes esta orden asiganda")},w=t=>{const s=a.filter(r=>r.idVtex_order===t.replace(/\s+$/,""));console.log(t),console.log(s),s.length>0?n(s):n(a)},y=t=>{if(t){const s=a.filter(r=>r.packing_assigment&&r.packing_assigment.includes(h.id));n(s)}else n(a)};return e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"font-semibold flex justify-center items-center gap-2  text-center text-black mt-4",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-400"}),e.jsx("div",{children:"Empaque"}),e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-400"})]}),e.jsxs("form",{className:" mx-auto m-4 px-4",children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"block w-full transition-all duration-500 p-2 ps-10  text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500  dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Busca una orden",required:!0,onChange:t=>{w(t.target.value)}})]})]}),e.jsx("div",{id:"filterMyOrders",className:"form-control mb-3 inline-block ml-4 border-2 rounded-lg shadow-sm ",children:e.jsxs("label",{className:"cursor-pointer label ",children:[e.jsx("span",{className:"label-text mr-2  font-semibold",children:"Mis ordenes:"}),e.jsx("input",{onChange:t=>y(t.target.checked),type:"checkbox",className:"checkbox checkbox-info"})]})}),f.length>0&&e.jsxs("div",{className:"text-center mb-3",children:["Ãšltima orden seleccionada:"," ",e.jsx("span",{onClick:()=>{b({idVtex_order:f,packing_assigment:[h.id]})},className:"link link-info",children:f}),e.jsxs("div",{className:"text-center font-semibold",children:["Total: ",a.length," ordenes"," "]})]}),e.jsxs("div",{className:"overflow-x-auto w-full  mx-auto",children:[e.jsxs("table",{className:"table text-center table-zebra  border-2 ","data-theme":"",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-black",children:[e.jsx("th",{children:"Orden ID"}),e.jsx("th",{children:"Colaboradores Asignados"})]})}),e.jsx("tbody",{children:!o&&u.map((t,s)=>e.jsxs("tr",{onClick:()=>b(t),className:"hover cursor-pointer",children:[e.jsx("td",{className:"",children:t.idVtex_order}),e.jsx("td",{children:t.packing_assigment===null||t.packing_assigment.length===0?"...":N(t.packing_assigment)})]},s))})]}),o&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"})," ",e.jsx("div",{className:"bg-gray-500 mb-2 rounded-md h-10 animate-pulse flex justify-between w-full text-white"}),e.jsx("div",{className:"bg-gray-500  rounded-md h-10 animate-pulse flex justify-between w-full text-white"})]})]})]})},M=({view:l})=>e.jsx("div",{children:e.jsxs(T,{children:[e.jsx(P,{view:l}),l===2&&e.jsx($,{}),l===3&&e.jsx(E,{})]})});export{M as default};
